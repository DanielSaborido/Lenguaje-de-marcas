<!doctype html5>
<html>
<head>
    <meta enctype="utf-8">
    <title>Cuenta Atras</title>
</head>
<body>
    <div id="numeros">
        <img src="0.png" id="cuenta4">
        <img src="0.png" id="cuenta3">
        <img src="0.png" id="cuenta2">
        <img src="0.png" id="cuenta1">
    </div>
	<input type="number" id="cuentaInput" oninput="inputModificado()">
    <button id="reiniciarBoton1" onclick="detenerCuenta()">Detener</button>
    <button id="reiniciarBoton2" onclick="reanudarCuenta()">Reanudar</button>
    <button id="reiniciarBoton3" onclick="reiniciarCuenta()">Reiniciar</button>
</body>
    <script>
        var intervalId; // Variable para almacenar el ID del intervalo
		const tiempo = document.getElementById('cuentaInput')
		var reinicio;

        // Variables de la cuenta regresiva
        var m = 0;
        var c = 0;
        var d = 0;
        var u = 0;

        // Función que se ejecuta al abrir la página y define lo que se hace cada segundo
        function cuentaAtras() {
            // Definimos acciones que se realizan cada cierto tiempo usando setInterval
            // El tiempo se expresa en milisegundos.
            // En este caso, se ejecuta marchaAtras cada 500 milisegundos.
            intervalId = setInterval(marchaAtras, 500);
        }

        // Función para reiniciar la cuenta regresiva
        function reiniciarCuenta() {
			inputModificado(reinicio)
        }

        // Función para detener la cuenta regresiva
        function detenerCuenta() {
            clearInterval(intervalId);
        }

        // Función para reanudar la cuenta regresiva
        function reanudarCuenta() {
            detenerCuenta();
            intervalId = setInterval(marchaAtras, 500);
        }

        // Función que actualiza los números de la cuenta regresiva
        function actualizarNumeros() {
            document.getElementById("cuenta1").src = u + ".png";
            document.getElementById("cuenta2").src = d + ".png";
            document.getElementById("cuenta3").src = c + ".png";
            document.getElementById("cuenta4").src = m + ".png";
        }

        // Función que se ejecuta cada segundo para la cuenta regresiva
        function marchaAtras() {
            if (u > 0) {
                u -= 1;
            }
            if (u == 0 && d > 0) {
                u = 9;
                d -= 1;
            }
            if (u == 0 && d == 0 && c > 0) {
                u = 9;
                d = 9;
                c -= 1;
            }
            if (u == 0 && d == 0 && c == 0 && m > 0) {
                u = 9;
                d = 9;
                c = 9;
                m -= 1;
            }
            if (u == 0 && d == 0 && c == 0 && m == 0) {
				document.getElementById("cuentaInput").style.display = "none";
				document.getElementById("reiniciarBoton1").style.display = "none";
				document.getElementById("reiniciarBoton2").style.display = "none";
				document.getElementById("reiniciarBoton3").style.display = "none";
                setTimeout(function() {
					alert('Se te acabo el tiempo.')
                    window.close();
                }, 1000);
            }
            actualizarNumeros();
        }
		
        // Función que se ejecuta cuando se modifica el input
        function inputModificado(numero) {
            if (numero.length === 4) {
                m = parseInt(numero.charAt(0));
                c = parseInt(numero.charAt(1));
                d = parseInt(numero.charAt(2));
                u = parseInt(numero.charAt(3));
			}
            if (numero.length === 3) {
				m = 0;
                c = parseInt(numero.charAt(0));
                d = parseInt(numero.charAt(1));
                u = parseInt(numero.charAt(2));
			}
            if (numero.length === 2) {
                m = 0;
                c = 0;
                d = parseInt(numero.charAt(0));
                u = parseInt(numero.charAt(1));
			}
            if (numero.length === 1) {
                m = 0;
                c = 0;
                d = 0;
                u = parseInt(numero.charAt(0));
			}
			actualizarNumeros();
			detenerCuenta();
			cuentaAtras();
        }
		tiempo.addEventListener('keydown', function(event) {
			if (event.key === "Enter") {
				event.preventDefault();
				var valor = this.value;
				reinicio = valor;
				inputModificado(valor);
				this.value='';
			}
		});
    </script>
</html>
